<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <title>SmartTrader – داشبورد زنده</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="/static/css/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="theme-dark-pro">
<div class="st-page">

    <!-- ================= HERO ================= -->
    <header class="st-hero">

        <div class="st-hero-left">
            <canvas id="hero-sparkline"></canvas>

            <div class="st-hero-ticker">
                قیمت لحظه‌ای BTC/IRT:
                <span id="hero-btc-price">--</span>
            </div>
        </div>

        <div class="st-hero-right">
            <div class="st-pill st-pill-primary">SmartTrader • موتور تصمیم‌گیری</div>

            <h1>
                رباتی که بازار کریپتو را به‌صورت
                <span class="st-highlight">الگوریتمیک و ۲۴ ساعته</span>
                رصد و معامله می‌کند.
            </h1>

            <p class="st-hero-subtitle">
                تحلیل چندتایم‌فریمی، ADX, ATR, ریسک‌سنجی داخلی و موتور سیگنال‌دهی پیشرفته.
            </p>

            <div class="st-hero-badges">
                <div class="st-badge">
                    <span>آخرین تصمیم</span>
                    <span id="hero-last-decision">--</span>
                </div>
                <div class="st-badge">
                    <span>حالت بازار</span>
                    <span id="hero-regime">--</span>
                </div>
                <div class="st-badge">
                    <span>قدرت روند (ADX)</span>
                    <span id="hero-adx">--</span>
                </div>
                <div class="st-badge">
                    <span>Winrate</span>
                    <span id="hero-winrate">--</span>
                </div>
            </div>

            <div class="st-hero-actions">
                <a href="/dashboard" class="st-btn st-btn-primary">ورود به داشبورد</a>
            </div>
        </div>
    </header>

    <!-- ================= MAIN ================= -->
    <main class="st-main">

        <!-- ========== ENERGY CHART + PANEL ========== -->
        <section class="st-row st-row-responsive">
            <div class="st-card st-card-large">
                <div class="st-card-header">
                    <h2>Energy Spectrum</h2>
                    <p>توزیع انرژی تصمیم‌ها (Aggregate S)</p>
                </div>
                <canvas id="priceChart"></canvas>
            </div>

            <aside class="st-card st-side-panel">

                <!-- Probability Engine -->
                <div class="st-panel-block">
                    <h3>Probability Engine</h3>
                    <div class="prob-row">
                        <span>BUY</span>
                        <div class="prob-bar"><div id="prob-buy"></div></div>
                        <span id="prob-buy-label">--</span>
                    </div>
                    <div class="prob-row">
                        <span>SELL</span>
                        <div class="prob-bar"><div id="prob-sell"></div></div>
                        <span id="prob-sell-label">--</span>
                    </div>
                    <div class="prob-row">
                        <span>HOLD</span>
                        <div class="prob-bar"><div id="prob-hold"></div></div>
                        <span id="prob-hold-label">--</span>
                    </div>
                </div>

                <!-- Volatility -->
                <div class="st-panel-block">
                    <h3>Volatility Band</h3>
                    <div class="vol-wrapper">
                        <div id="vol-pointer"></div>
                    </div>
                    <div id="volatility-label" class="vol-text">--</div>
                </div>

                <!-- Sentiment -->
                <div class="st-panel-block">
                    <h3>Sentiment Radar</h3>
                    <ul id="sentiment-list"></ul>
                </div>

            </aside>
        </section>

        <!-- ========== DECISIONS HEATMAP ========== -->
        <section class="st-row">
            <div class="st-card">
                <div class="st-card-header">
                    <h2>Heatmap تصمیم‌ها</h2>
                </div>
                <div id="heatmap-decisions" class="heatmap-box"></div>
            </div>
        </section>

        <!-- ========== METRICS ========== -->
        <section class="st-row st-row-responsive">
            <div class="st-card">
                <div class="st-card-header">
                    <h2>خلاصه عملکرد</h2>
                </div>

                <div class="st-metrics-grid">
                    <div><label>PnL:</label><span id="metric-total-pnl">--</span></div>
                    <div><label>Win:</label><span id="metric-total-wins">--</span></div>
                    <div><label>Loss:</label><span id="metric-total-losses">--</span></div>
                    <div><label>تعداد معاملات:</label><span id="metric-total-trades">--</span></div>
                    <div><label>Error Rate:</label><span id="metric-error-rate">--</span></div>
                </div>
            </div>

            <!-- AI ADVICE -->
            <div class="st-card">
                <div class="st-card-header">
                    <h2>توصیه هوشمند</h2>
                </div>
                <div class="ai-box">
                    <h3 id="ai-advice-title">--</h3>
                    <p id="ai-advice-body">--</p>
                    <ul id="ai-advice-bullets"></ul>
                </div>
            </div>
        </section>

        <!-- ========== DECISION FEED ========== -->
        <section class="st-row">
            <div class="st-card">
                <div class="st-card-header">
                    <h2>جریان زنده تصمیم‌ها</h2>
                </div>
                <div id="decision-list" class="decision-feed"></div>
            </div>
        </section>

        <!-- ========== DAILY PNL & TRADES ========== -->
        <section class="st-row st-row-responsive">
            <div class="st-card">
                <div class="st-card-header"><h2>PnL روزانه</h2></div>
                <div id="pnl-daily"></div>
            </div>

            <div class="st-card">
                <div class="st-card-header"><h2>معاملات اخیر</h2></div>
                <div id="recent-trades"></div>
            </div>
        </section>

    </main>

    <footer class="st-footer">
        <span>SmartTrader © 2025</span>
    </footer>
</div>

<script src="/static/js/home.js"></script>
</body>
</html>
